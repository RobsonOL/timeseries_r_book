<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 5 Conceitos Teóricos | Séries Temporais com R</title>
  <meta name="description" content="Um livro sobre séries temporais para usuários de R." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 5 Conceitos Teóricos | Séries Temporais com R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Um livro sobre séries temporais para usuários de R." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 5 Conceitos Teóricos | Séries Temporais com R" />
  
  <meta name="twitter:description" content="Um livro sobre séries temporais para usuários de R." />
  

<meta name="author" content="Robson Oliveira Lima" />


<meta name="date" content="2021-12-10" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="modelos-estatísticos.html"/>
<link rel="next" href="considerações-práticas.html"/>
<script src="libs/header-attrs-2.9/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.4.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.57.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.57.1/plotly-latest.min.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Séries Temporais com R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Prefácio</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#roteiro"><i class="fa fa-check"></i><b>1.1</b> Roteiro</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#pré-requisitos"><i class="fa fa-check"></i><b>1.2</b> Pré-requisitos</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="os-fundamentos-de-séries-temporais.html"><a href="os-fundamentos-de-séries-temporais.html"><i class="fa fa-check"></i><b>2</b> Os fundamentos de séries temporais</a>
<ul>
<li class="chapter" data-level="2.1" data-path="os-fundamentos-de-séries-temporais.html"><a href="os-fundamentos-de-séries-temporais.html#o-que-pode-ser-previsto"><i class="fa fa-check"></i><b>2.1</b> O que pode ser previsto?</a></li>
<li class="chapter" data-level="2.2" data-path="os-fundamentos-de-séries-temporais.html"><a href="os-fundamentos-de-séries-temporais.html#principais-modelos-de-previsão"><i class="fa fa-check"></i><b>2.2</b> Principais modelos de previsão</a></li>
<li class="chapter" data-level="2.3" data-path="os-fundamentos-de-séries-temporais.html"><a href="os-fundamentos-de-séries-temporais.html#o-passo-a-passo-de-realizar-uma-previsão"><i class="fa fa-check"></i><b>2.3</b> O passo-a-passo de realizar uma previsão</a></li>
<li class="chapter" data-level="2.4" data-path="os-fundamentos-de-séries-temporais.html"><a href="os-fundamentos-de-séries-temporais.html#um-projeto-de-previsão-de-ponta-a-ponta"><i class="fa fa-check"></i><b>2.4</b> Um Projeto de Previsão de Ponta a Ponta</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ts.html"><a href="ts.html"><i class="fa fa-check"></i><b>3</b> Séries Temporais</a>
<ul>
<li class="chapter" data-level="3.1" data-path="ts.html"><a href="ts.html#características-de-séries-temporais"><i class="fa fa-check"></i><b>3.1</b> Características de Séries Temporais</a></li>
<li class="chapter" data-level="3.2" data-path="ts.html"><a href="ts.html#objeto-ts"><i class="fa fa-check"></i><b>3.2</b> Objeto <code>ts</code></a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="ts.html"><a href="ts.html#frequências-de-uma-série-temporal"><i class="fa fa-check"></i><b>3.2.1</b> Frequências de uma série temporal</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="ts.html"><a href="ts.html#gráficos-de-séries-temporais"><i class="fa fa-check"></i><b>3.3</b> Gráficos de Séries Temporais</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="ts.html"><a href="ts.html#convertendo-tk-para-data.frame"><i class="fa fa-check"></i><b>3.3.1</b> Convertendo tk para data.frame</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="ts.html"><a href="ts.html#padrões-das-séries-temporais"><i class="fa fa-check"></i><b>3.4</b> Padrões das Séries Temporais</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="ts.html"><a href="ts.html#série-sem-padrão"><i class="fa fa-check"></i><b>3.4.1</b> Série sem padrão</a></li>
<li class="chapter" data-level="3.4.2" data-path="ts.html"><a href="ts.html#sazonalidade"><i class="fa fa-check"></i><b>3.4.2</b> Sazonalidade</a></li>
<li class="chapter" data-level="3.4.3" data-path="ts.html"><a href="ts.html#tendência"><i class="fa fa-check"></i><b>3.4.3</b> Tendência</a></li>
<li class="chapter" data-level="3.4.4" data-path="ts.html"><a href="ts.html#padrão-cíclico"><i class="fa fa-check"></i><b>3.4.4</b> Padrão Cíclico</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="ts.html"><a href="ts.html#decomposição"><i class="fa fa-check"></i><b>3.5</b> Decomposição</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="modelos-estatísticos.html"><a href="modelos-estatísticos.html"><i class="fa fa-check"></i><b>4</b> Modelos Estatísticos</a>
<ul>
<li class="chapter" data-level="4.1" data-path="modelos-estatísticos.html"><a href="modelos-estatísticos.html#ruído-branco"><i class="fa fa-check"></i><b>4.1</b> Ruído Branco</a></li>
<li class="chapter" data-level="4.2" data-path="modelos-estatísticos.html"><a href="modelos-estatísticos.html#média-móvel-e-filtro"><i class="fa fa-check"></i><b>4.2</b> Média Móvel e Filtro</a></li>
<li class="chapter" data-level="4.3" data-path="modelos-estatísticos.html"><a href="modelos-estatísticos.html#autoregressões"><i class="fa fa-check"></i><b>4.3</b> Autoregressões</a></li>
<li class="chapter" data-level="4.4" data-path="modelos-estatísticos.html"><a href="modelos-estatísticos.html#random-walk-com-drift"><i class="fa fa-check"></i><b>4.4</b> Random Walk com Drift</a></li>
<li class="chapter" data-level="4.5" data-path="modelos-estatísticos.html"><a href="modelos-estatísticos.html#sinal-no-ruído"><i class="fa fa-check"></i><b>4.5</b> Sinal no Ruído</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="conceitos-teóricos.html"><a href="conceitos-teóricos.html"><i class="fa fa-check"></i><b>5</b> Conceitos Teóricos</a>
<ul>
<li class="chapter" data-level="5.1" data-path="conceitos-teóricos.html"><a href="conceitos-teóricos.html#média-variâncias-e-covariâncias"><i class="fa fa-check"></i><b>5.1</b> Média, Variâncias e Covariâncias</a></li>
<li class="chapter" data-level="5.2" data-path="conceitos-teóricos.html"><a href="conceitos-teóricos.html#função-média"><i class="fa fa-check"></i><b>5.2</b> Função Média</a></li>
<li class="chapter" data-level="5.3" data-path="conceitos-teóricos.html"><a href="conceitos-teóricos.html#função-de-autocovariância"><i class="fa fa-check"></i><b>5.3</b> Função de Autocovariância</a></li>
<li class="chapter" data-level="5.4" data-path="conceitos-teóricos.html"><a href="conceitos-teóricos.html#a-função-de-autocorrelação-fac"><i class="fa fa-check"></i><b>5.4</b> A Função de Autocorrelação (FAC)</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="conceitos-teóricos.html"><a href="conceitos-teóricos.html#tendência-e-sazonalidade-em-correlogramas"><i class="fa fa-check"></i><b>5.4.1</b> Tendência e sazonalidade em Correlogramas</a></li>
<li class="chapter" data-level="5.4.2" data-path="conceitos-teóricos.html"><a href="conceitos-teóricos.html#a-função-de-covariância-cruzada-e-de-correlação-cruzada"><i class="fa fa-check"></i><b>5.4.2</b> A Função de Covariância-Cruzada e de Correlação-Cruzada</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="considerações-práticas.html"><a href="considerações-práticas.html"><i class="fa fa-check"></i><b>6</b> Considerações Práticas</a>
<ul>
<li class="chapter" data-level="6.1" data-path="considerações-práticas.html"><a href="considerações-práticas.html#rodando-um-mod"><i class="fa fa-check"></i><b>6.1</b> Rodando um mod</a></li>
<li class="chapter" data-level="6.2" data-path="considerações-práticas.html"><a href="considerações-práticas.html#valores-ajustados-e-resíduos"><i class="fa fa-check"></i><b>6.2</b> Valores ajustados e resíduos</a></li>
<li class="chapter" data-level="6.3" data-path="considerações-práticas.html"><a href="considerações-práticas.html#diagnósticos-dos-resíduos"><i class="fa fa-check"></i><b>6.3</b> Diagnósticos dos Resíduos</a></li>
<li class="chapter" data-level="6.4" data-path="considerações-práticas.html"><a href="considerações-práticas.html#transformação-de-variáveis"><i class="fa fa-check"></i><b>6.4</b> Transformação de variáveis</a></li>
<li class="chapter" data-level="6.5" data-path="considerações-práticas.html"><a href="considerações-práticas.html#medindo-a-performance-da-previsão"><i class="fa fa-check"></i><b>6.5</b> Medindo a performance da previsão</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="considerações-práticas.html"><a href="considerações-práticas.html#conjuntos-de-teste-e-treinamento"><i class="fa fa-check"></i><b>6.5.1</b> Conjuntos de teste e treinamento</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="considerações-práticas.html"><a href="considerações-práticas.html#validação-cruzada"><i class="fa fa-check"></i><b>6.6</b> Validação Cruzada</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="modelo-de-regressão-para-séries-temporais.html"><a href="modelo-de-regressão-para-séries-temporais.html"><i class="fa fa-check"></i><b>7</b> Modelo de Regressão para Séries Temporais</a></li>
<li class="chapter" data-level="8" data-path="modelos-arima.html"><a href="modelos-arima.html"><i class="fa fa-check"></i><b>8</b> Modelos ARIMA</a></li>
<li class="chapter" data-level="9" data-path="modelos-de-regressão-dinâmicos.html"><a href="modelos-de-regressão-dinâmicos.html"><i class="fa fa-check"></i><b>9</b> Modelos de Regressão Dinâmicos</a>
<ul>
<li class="chapter" data-level="9.0.1" data-path="modelos-de-regressão-dinâmicos.html"><a href="modelos-de-regressão-dinâmicos.html#valor-de-utilizar-variáveis-explicativas"><i class="fa fa-check"></i><b>9.0.1</b> Valor de utilizar variáveis explicativas</a></li>
<li class="chapter" data-level="9.0.2" data-path="modelos-de-regressão-dinâmicos.html"><a href="modelos-de-regressão-dinâmicos.html#modelos-dinâmicos-de-regressão"><i class="fa fa-check"></i><b>9.0.2</b> Modelos Dinâmicos de Regressão</a></li>
<li class="chapter" data-level="9.1" data-path="modelos-de-regressão-dinâmicos.html"><a href="modelos-de-regressão-dinâmicos.html#estimação"><i class="fa fa-check"></i><b>9.1</b> Estimação</a></li>
<li class="chapter" data-level="9.2" data-path="modelos-de-regressão-dinâmicos.html"><a href="modelos-de-regressão-dinâmicos.html#regressão-com-erros-arima"><i class="fa fa-check"></i><b>9.2</b> Regressão com Erros ARIMA</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="modelos-de-regressão-dinâmicos.html"><a href="modelos-de-regressão-dinâmicos.html#exemplo-consumo-e-renda-nos-eua"><i class="fa fa-check"></i><b>9.2.1</b> Exemplo: Consumo e Renda nos EUA</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="modelos-avançados.html"><a href="modelos-avançados.html"><i class="fa fa-check"></i><b>10</b> Modelos Avançados</a>
<ul>
<li class="chapter" data-level="10.1" data-path="modelos-avançados.html"><a href="modelos-avançados.html#múltiplas-sazonalidades"><i class="fa fa-check"></i><b>10.1</b> Múltiplas Sazonalidades</a></li>
<li class="chapter" data-level="10.2" data-path="modelos-avançados.html"><a href="modelos-avançados.html#modelo-prophet"><i class="fa fa-check"></i><b>10.2</b> Modelo Prophet</a></li>
<li class="chapter" data-level="10.3" data-path="modelos-avançados.html"><a href="modelos-avançados.html#modelo-de-redes-neurais"><i class="fa fa-check"></i><b>10.3</b> Modelo de Redes Neurais</a></li>
<li class="chapter" data-level="10.4" data-path="modelos-avançados.html"><a href="modelos-avançados.html#bootstrapping-e-bagging"><i class="fa fa-check"></i><b>10.4</b> Bootstrapping e Bagging</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="modelos-hierárquicos.html"><a href="modelos-hierárquicos.html"><i class="fa fa-check"></i><b>11</b> Modelos Hierárquicos</a>
<ul>
<li class="chapter" data-level="11.1" data-path="modelos-hierárquicos.html"><a href="modelos-hierárquicos.html#séries-temporais-agrupadas"><i class="fa fa-check"></i><b>11.1</b> Séries Temporais Agrupadas</a></li>
<li class="chapter" data-level="11.2" data-path="modelos-hierárquicos.html"><a href="modelos-hierárquicos.html#hierarquia-temporal"><i class="fa fa-check"></i><b>11.2</b> Hierarquia Temporal</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Séries Temporais com R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="conceitos-teóricos" class="section level1" number="5">
<h1><span class="header-section-number">Capítulo 5</span> Conceitos Teóricos</h1>
<p>Aqui vamos descrever alguns conceitos fundamentais sobre a teoria de séries temporais. Em particular, entender o que é um processo estocástico, a média, a função de covariância, processos estocásticos e a função de autocorrelação.</p>
<div id="média-variâncias-e-covariâncias" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> Média, Variâncias e Covariâncias</h2>
<p>Agora vamos introduzir várias medidas teoricas utilizadas para descrever como séries temporais se comportam. Como é usual em estatística, a descrição completa da série envolve uma função de distribuição multivariada a amostra conjunta dos valores <span class="math inline">\(y_1, y_2, ..., y_n\)</span>, enquanto que uma descrição mais econômica pode ser obtida em termos das funções média e de autocorrelação. Como a correlação é uma característica essencial da análise de séries temporais, as medidas de descrição mais úteis são aquelas expressadas em termos função de autocorrelação e função de autovariância.</p>
<p>Vamos discutir alguns conceitos importantes relacionados a todos os tipo de modelos estatísticos de série temporal. Especificamente podemos utilizar algumas medidas para descrever uma série temporal.</p>
</div>
<div id="função-média" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Função Média</h2>
<p>A função média descreve o valor esperado de uma série temporal. Assim, para um processo estocástico <span class="math inline">\(\{ Y_t\}\)</span>, a função média é definida como:</p>
<p><span class="math display">\[\mu_t = E(Y_t)\]</span>
para <span class="math inline">\(t = 0,1,2,...\)</span>. Assim, <span class="math inline">\(\mu_t\)</span> é o valor esperado do processo no tempo <span class="math inline">\(t\)</span>.</p>
<p><strong>Exemplo 1: Função Média de Média Móvel</strong></p>
<p>Para uma media móvel dada por <span class="math inline">\(\frac{1}{3}(w_{t-1} + w_t + w_{t+1})\)</span>, seu valor esperado (função média) é igual a zero, <span class="math inline">\(\mu_y = 0\)</span>. Assim, a função média ao redor de zero descreve bem o comportamento geral da média móvel. O mesmo pode ser dito do ruído branco.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="conceitos-teóricos.html#cb52-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb52-2"><a href="conceitos-teóricos.html#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> x, <span class="at">y =</span> ruido_branco)) <span class="sc">+</span> </span>
<span id="cb52-3"><a href="conceitos-teóricos.html#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="st">&quot;Ruído Branco&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb52-4"><a href="conceitos-teóricos.html#cb52-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="fu">aes</span>(<span class="at">yintercept =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">&quot;Função Média&quot;</span>), <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb52-5"><a href="conceitos-teóricos.html#cb52-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Tempo&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb52-6"><a href="conceitos-teóricos.html#cb52-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Média Móvel&quot;</span>,</span>
<span id="cb52-7"><a href="conceitos-teóricos.html#cb52-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Função Média da Média Móvel é Zero&quot;</span>,</span>
<span id="cb52-8"><a href="conceitos-teóricos.html#cb52-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb52-9"><a href="conceitos-teóricos.html#cb52-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<div class="figure">
<img src="_main_files/figure-html/ruido_media-1.png" alt="Função Média de um ruído branco" width="672" />
<p class="caption">
(#fig:ruido_media)Função Média de um ruído branco
</p>
</div>
<p><strong>Exemplo 2: Função Média de Random Walk com Drift</strong></p>
<p>Para um <em>random walk com drift</em> qual a função média? Dado que este modelo é dado por <span class="math inline">\(y_t = \delta t + \sum_{j=1}^t w_t\)</span>, como <span class="math inline">\(E(w_t) = 0\)</span> e como <span class="math inline">\(\delta\)</span> é uma constante, temos</p>
<p><span class="math display">\[\mu(yt) = \delta t\]</span></p>
<p>Assim, a função média de uma <em>random walk com drift</em> é uma linha reta com inclinação <span class="math inline">\(\delta\)</span>. Uma comparação de uma random walk com drift e sua função média pode ser vista na figura <a href="conceitos-teóricos.html#fig:random-media">5.1</a>.</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="conceitos-teóricos.html#cb53-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb53-2"><a href="conceitos-teóricos.html#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># criar a função média da random walk</span></span>
<span id="cb53-3"><a href="conceitos-teóricos.html#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">funcao_media_random_walk =</span> .<span class="dv">2</span><span class="sc">*</span>x) <span class="sc">%&gt;%</span> </span>
<span id="cb53-4"><a href="conceitos-teóricos.html#cb53-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> x)) <span class="sc">+</span> </span>
<span id="cb53-5"><a href="conceitos-teóricos.html#cb53-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> random_walk_drift, <span class="at">color =</span> <span class="st">&quot;Random Walk com Drift&quot;</span>)) <span class="sc">+</span></span>
<span id="cb53-6"><a href="conceitos-teóricos.html#cb53-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> funcao_media_random_walk, <span class="at">color =</span> <span class="st">&quot;Função Média&quot;</span>), <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb53-7"><a href="conceitos-teóricos.html#cb53-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Tempo&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb53-8"><a href="conceitos-teóricos.html#cb53-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Random Walk com Drift Delta = 0.2&quot;</span>,</span>
<span id="cb53-9"><a href="conceitos-teóricos.html#cb53-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;A função Média é uma linha Reta com Inclinação Delta = 0.2&quot;</span>,</span>
<span id="cb53-10"><a href="conceitos-teóricos.html#cb53-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;Modelo:&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:random-media"></span>
<img src="_main_files/figure-html/random-media-1.png" alt="Função média de uma série random walk com drift" width="672" />
<p class="caption">
Figure 5.1: Função média de uma série random walk com drift
</p>
</div>
<p><strong>Exemplo 3: Função Média de um Sinal mais Ruído</strong></p>
<p>A função média para um modelo aditivo na forma <span class="math inline">\(y_t = s_t + w_t\)</span> é obtido por:</p>
<p><span class="math display">\[\mu_{yt} = E(y_t) = E[2 \cos(2\pi \frac{2t + 15}{50}) + w_t]\]</span></p>
<p>Novamente, <span class="math inline">\(E(w_t) = 0\)</span> e os demais termos são constantes, logo:</p>
<p><span class="math display">\[\mu_{yt} = E(y_t) = 2 \cos(2\pi \frac{2t + 15}{50})\]</span>
A média móvel é apenas o sinal sem o ruído.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="conceitos-teóricos.html#cb54-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb54-2"><a href="conceitos-teóricos.html#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> x)) <span class="sc">+</span></span>
<span id="cb54-3"><a href="conceitos-teóricos.html#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> curva_onda, <span class="at">color =</span> <span class="st">&quot;Função Média&quot;</span>), <span class="at">size =</span> <span class="fl">1.5</span>, <span class="at">linetype =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb54-4"><a href="conceitos-teóricos.html#cb54-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> curva_onda_ruido, <span class="at">color =</span> <span class="st">&quot;Sinal com Ruído&quot;</span>)) <span class="sc">+</span> </span>
<span id="cb54-5"><a href="conceitos-teóricos.html#cb54-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Curva em Onda e Sua Função Média&quot;</span>,</span>
<span id="cb54-6"><a href="conceitos-teóricos.html#cb54-6" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;A função Média é o Sinal sem Ruído&quot;</span>,</span>
<span id="cb54-7"><a href="conceitos-teóricos.html#cb54-7" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;&quot;</span>) <span class="sc">+</span></span>
<span id="cb54-8"><a href="conceitos-teóricos.html#cb54-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<div class="figure">
<img src="_main_files/figure-html/sinal_media-1.png" alt="Função Média de uma série com sinal" width="672" />
<p class="caption">
(#fig:sinal_media)Função Média de uma série com sinal
</p>
</div>
</div>
<div id="função-de-autocovariância" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Função de Autocovariância</h2>
<p>A função de autocovariância mostra a covariância de um processo consigo mesmo em dois pontos diferentes no tempo. Assim, para uma série mensal de preços, a função de autocovariância mostra a relação entre <span class="math inline">\(y_{jan}\)</span> e <span class="math inline">\(y_{fev}\)</span>, que são os valores observados de preço para janeiro e fevereiro, respectivamente.</p>
<p>A função de autocovariância <span class="math inline">\(\gamma_{t,s}\)</span> é definida como:</p>
<p><span class="math display">\[\gamma_{t,s} = Cov(Y_t, Y_s)\]</span></p>
<p>para <span class="math inline">\(t,s=0,1,2,...\)</span></p>
<p>Onde <span class="math inline">\(Cov(Y_t,Y_s) = E[(Y_t - \mu_t)(Y_s - \mu_s)] = E[Y_t Y_s) - \mu_t \mu_s\)</span>.</p>
<p>Portanto, a autocovariância mede a dependência linear entre dois pontos na mesma série observadas em pontos diferentes. Séries que são muito suavizadas exibem funções de autocovariância que permanecem altas mesmo quando o <span class="math inline">\(t\)</span> e o <span class="math inline">\(s\)</span> estão muito longes entre si. Séries com muita agitação tendem a ter funções de autocovariância que são próximas de zero para valores muito distantes entre si.</p>
<p>Lembre que se <span class="math inline">\(s = t\)</span>, ou seja, se estivermos comparando uma observação no tempo consigo mesmo, a autovariância se reduz ao valor de variância, porque</p>
<p><span class="math display">\[\gamma_{y}(t,t) = E[(y_t - \mu_t)^2] = \text{Var}(x_t)\]</span></p>
<p><strong>Exemplo 1: Autocovariância de Ruído Branco</strong></p>
<p>Para uma série temporal ruído branco <span class="math inline">\(w_t\)</span> que tem <span class="math inline">\(E(w_t)=0\)</span>, temos que</p>
<p><span class="math display">\[\gamma_w = Cov(w_s, w_t) = 0\]</span></p>
<p>para <span class="math inline">\(s \neq t\)</span>. Assim, a relação linear entre duas observações é zero. O valor de uma observação num ponto no tempo não influencia em nada os valores observados nos demais pontos do tempo.</p>
<p><strong>Exemplo 2: Autocovariância de uma Média Móvel</strong></p>
<p>Considere nosso exemplo de uma média móvel. Assim,</p>
<p><span class="math display">\[\gamma_v (s,t) = cov(v_s, v_t) = cov \{ \frac{1}{3}(w_{s-1} + w_s + w_{s+1}), \frac{1}{3}(w_{t-1} + w_t + w_{t+1}) \}\]</span></p>
<p>Quando <span class="math inline">\(s = t\)</span>, temos</p>
<p><span class="math display">\[\gamma_v (s,t) = \frac{1}{9}cov\{(w_{t-1} + w_t + w_{t+1}), (w_{t-1} + w_t + w_{t+1}) \}\]</span></p>
<p><span class="math display">\[\gamma_v (s,t) = \frac{1}{9}\[ cov(w_{t-1}, w_{t-1} + cov(w_{t} + w_t) + cov(w_{t+1} + w_{t+1}) \]\]</span></p>
<p><span class="math display">\[\gamma_v (s,t) = \frac{3}{9} \sigma^2_w\]</span></p>
<p>O mesmo exercício pode ser feito para <span class="math inline">\(s = t + 1\)</span>, quando analisamos observações que estão distantes uma observação entre si (janeiro e março, por exemplo), onde <span class="math inline">\(\gamma_v (t + 1, t) = \frac{2}{9}\sigma^2_w\)</span>. Quando as observaçãos estão separadas por dois períodos, <span class="math inline">\(|s-t| = 2\)</span>, temos <span class="math inline">\(\gamma_v(s,t) = \frac{1}{9}\sigma^2_w\)</span>, e quando as observações estão separadas por mais de dois períodos, <span class="math inline">\(|s-t| &gt; 2\)</span>, temos <span class="math inline">\(\gamma_v(s,t) = 0\)</span>.</p>
<p>Assim, quando suavizamos um ruído branco utilizando uma média móvel, adicionamos um pouco de covariância, mas esta dependência linear se reduz com o aumento da separação entre os valores. Assim, a relação entre janeiro e fevereiro é mais forte que a relação entre janeiro e março. Contudo, a relação entre janeiro e abril seria igual a zero, dado que <span class="math inline">\(| \text{Jan} - \text{Abr} | &gt; 2\)</span>.</p>
<p><strong>Exemplo 3: Autocovariância de um Random Walk</strong></p>
<p>Para um modelo random walk, <span class="math inline">\(y_t = \sum_{j = 1}^t w_t\)</span>, temos que</p>
<p><span class="math display">\[\gamma_y (s,t) = cov(y_s, y_t) = cov \left( \sum_{j=1}^2 w_j, \sum_{k=1}^t w_t\right) = \min\{s,t\} \sigma^2_w\]</span></p>
<p>porque o <span class="math inline">\(w_t\)</span> são variáveis não correlacionadas entre si. Nota que, diferentemente dos exemplos anteriores, a função autocovariância de uma <em>random walk</em> depende no valor em particular de <span class="math inline">\(s\)</span> e <span class="math inline">\(t\)</span>, e não na separação entre as observações ou no <em>lag</em>. Perceba também que a variãncia de uma random walk, <span class="math inline">\(var(y_t) = t \sigma^2_w\)</span>, aumenta sem limites quando <span class="math inline">\(t\)</span> cresce. O efeito desta variância pode ser observada na figura para o random walk. Conforme <span class="math inline">\(t\)</span> aumenta, mais e mais a variável se distancia da sua função média <span class="math inline">\(\delta t\)</span>.</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="conceitos-teóricos.html#cb55-1" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="conceitos-teóricos.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># criar a função média da random walk</span></span>
<span id="cb55-3"><a href="conceitos-teóricos.html#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">funcao_media_random_walk =</span> .<span class="dv">2</span><span class="sc">*</span>x) <span class="sc">%&gt;%</span> </span>
<span id="cb55-4"><a href="conceitos-teóricos.html#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> x)) <span class="sc">+</span> </span>
<span id="cb55-5"><a href="conceitos-teóricos.html#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> random_walk_drift, <span class="at">color =</span> <span class="st">&quot;Random Walk com Drift&quot;</span>)) <span class="sc">+</span></span>
<span id="cb55-6"><a href="conceitos-teóricos.html#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">y =</span> funcao_media_random_walk, <span class="at">color =</span> <span class="st">&quot;Função Média&quot;</span>), <span class="at">linetype =</span> <span class="dv">2</span>, <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb55-7"><a href="conceitos-teóricos.html#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Tempo&quot;</span>, <span class="at">y =</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb55-8"><a href="conceitos-teóricos.html#cb55-8" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&quot;Random Walk com Drift Delta = 0.2&quot;</span>,</span>
<span id="cb55-9"><a href="conceitos-teóricos.html#cb55-9" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">&quot;Quanto maior o t, maior a distância entre a Série e sua Função Média&quot;</span>,</span>
<span id="cb55-10"><a href="conceitos-teóricos.html#cb55-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">color =</span> <span class="st">&quot;Modelo:&quot;</span>) <span class="sc">+</span> </span>
<span id="cb55-11"><a href="conceitos-teóricos.html#cb55-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:cov-random-walk"></span>
<img src="_main_files/figure-html/cov-random-walk-1.png" alt="Autocovariância de uma random walk com drift" width="672" />
<p class="caption">
Figure 5.2: Autocovariância de uma random walk com drift
</p>
</div>
</div>
<div id="a-função-de-autocorrelação-fac" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> A Função de Autocorrelação (FAC)</h2>
<p>A correlação mensura a relação linear entre duas variáveis. A autocorrelação por sua vez mede a relação linear entre valores defasados ( <em>lagged</em> ) de uma série temporal.</p>
<p>Uma forma de mensurar como um valor se relaciona a um valor passado é utilizando a Função de Autocorrelação (FAC), ou ACF em inglês. Ela mede a previsibilidade linear da série no tempo <span class="math inline">\(t\)</span>, usando apenas os valores de <span class="math inline">\(y_s\)</span>. A função de autocorrelação é definida como</p>
<p><span class="math display">\[\rho (s,t) = \frac{\gamma(s,t)}{\sqrt{\gamma(s,s)\gamma(t,t)}}\]</span></p>
<p>O valor de <span class="math inline">\(\rho\)</span>, a covariância, esta sempre no intervalo <span class="math inline">\([-1,1]\)</span>. Se pudermos prever <span class="math inline">\(y_t\)</span> perfeitamente a partir de <span class="math inline">\(y_s\)</span> através de uma relação linear <span class="math inline">\(y_t = \beta_0 + \beta_1 y_s\)</span>, então a correlação será <span class="math inline">\(+1\)</span> quando <span class="math inline">\(\beta_1 &gt; 0\)</span>, e a correlação será <span class="math inline">\(-1\)</span> quando <span class="math inline">\(\beta_1 &lt;0\)</span>. Portanto, temos uma medida grosseira da nossa habilidade de prever a série no tempo <span class="math inline">\(t\)</span> utilizando os valores no tempo <span class="math inline">\(s\)</span>.</p>
<p>Vamos observar esse comportamento na prática utilizando os dados trimestrais de produção de cerveja. A figura <a href="conceitos-teóricos.html#fig:beer">5.3</a> mostra a série.</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="conceitos-teóricos.html#cb56-1" aria-hidden="true" tabindex="-1"></a>beer2 <span class="ot">&lt;-</span> <span class="fu">window</span>(ausbeer, <span class="at">start=</span><span class="dv">1992</span>)</span>
<span id="cb56-2"><a href="conceitos-teóricos.html#cb56-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-3"><a href="conceitos-teóricos.html#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(beer2) <span class="sc">+</span></span>
<span id="cb56-4"><a href="conceitos-teóricos.html#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Produção trimestral de Cerveja, Australia&quot;</span>) <span class="sc">+</span></span>
<span id="cb56-5"><a href="conceitos-teóricos.html#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;&quot;</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">&quot;Ano&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:beer"></span>
<img src="_main_files/figure-html/beer-1.png" alt="Produção trimestral de cerveja" width="672" />
<p class="caption">
Figure 5.3: Produção trimestral de cerveja
</p>
</div>
<p>É possível observar que os dados possuem um comportamento sazonal bem marcante. Vamos visualizar esse comportamento utilizando o correlograma, o gráfico que nos retorna os coeficientes de autocorrelação.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="conceitos-teóricos.html#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forecast)</span>
<span id="cb57-2"><a href="conceitos-teóricos.html#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="conceitos-teóricos.html#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="conceitos-teóricos.html#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggAcf</span>(beer2)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:beer-auto"></span>
<img src="_main_files/figure-html/beer-auto-1.png" alt="Função de autocorrelação para a produção trimestral de cerveja" width="672" />
<p class="caption">
Figure 5.4: Função de autocorrelação para a produção trimestral de cerveja
</p>
</div>
<p>O gráfico parece mostrar:</p>
<ul>
<li><p>O <span class="math inline">\(r_4\)</span> é maior que outros <em>lags</em>. Isso é um resultado do padrão sazonal da série. Os picos tendem a ser separados por quatro trimestres e os vales tendem a ser separados por quatro trimestres.</p></li>
<li><p><span class="math inline">\(r_2\)</span> é mais negativo que outros <em>lags</em> porque os vales e picos tendem a ser separados por dois trimestres.</p></li>
<li><p>A linha azul indica se a correlação é significamente diferente de zero.</p></li>
</ul>
<div id="tendência-e-sazonalidade-em-correlogramas" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Tendência e sazonalidade em Correlogramas</h3>
<p>Quando os dados possuem uma tendência, as autocorrelações para pequenas defasagens é grande e positiva porque as observações próximas no tempo possuem valores semelhantes.</p>
<p>Assim, o ACF de uma série com tendência tende a ter valores positivos que lentamente decaem conforme o número de valores defasados (lags) aumenta.</p>
<p>A demanda por energia elétrica na australia (figura <a href="conceitos-teóricos.html#fig:energia-aus">5.5</a>) possui um misto de padrão sazonal e tendência.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="conceitos-teóricos.html#cb58-1" aria-hidden="true" tabindex="-1"></a>aelec <span class="ot">&lt;-</span> <span class="fu">window</span>(elec, <span class="at">start=</span><span class="dv">1980</span>)</span>
<span id="cb58-2"><a href="conceitos-teóricos.html#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="fu">autoplot</span>(aelec) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">&quot;Year&quot;</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">&quot;GWh&quot;</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:energia-aus"></span>
<img src="_main_files/figure-html/energia-aus-1.png" alt="Demanda por Energia Elétrica na Australia, 1980-1995" width="672" />
<p class="caption">
Figure 5.5: Demanda por Energia Elétrica na Australia, 1980-1995
</p>
</div>
<p>E a função de autocorrelação da série (figura <a href="conceitos-teóricos.html#fig:acf-energia">5.6</a>) tem um decaimento lento devido a tendência, enquanto possui pequenas ondas, que ocorrem devido ao comportamento sazonal da série.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="conceitos-teóricos.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggAcf</span>(aelec, <span class="at">lag=</span><span class="dv">48</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:acf-energia"></span>
<img src="_main_files/figure-html/acf-energia-1.png" alt="ACF da demanda australiana por energia elétrica" width="672" />
<p class="caption">
Figure 5.6: ACF da demanda australiana por energia elétrica
</p>
</div>
<p>O pacote <code>timetk</code> fornece uma função para gerar o correlograma.</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="conceitos-teóricos.html#cb60-1" aria-hidden="true" tabindex="-1"></a>aelec_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">electrical_demand =</span> <span class="fu">matrix</span>(aelec),</span>
<span id="cb60-2"><a href="conceitos-teóricos.html#cb60-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">date =</span> <span class="fu">time</span>(aelec)) <span class="sc">%&gt;%</span> </span>
<span id="cb60-3"><a href="conceitos-teóricos.html#cb60-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">as.Date</span>(date))</span>
<span id="cb60-4"><a href="conceitos-teóricos.html#cb60-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a href="conceitos-teóricos.html#cb60-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-6"><a href="conceitos-teóricos.html#cb60-6" aria-hidden="true" tabindex="-1"></a>aelec_df <span class="sc">%&gt;%</span> </span>
<span id="cb60-7"><a href="conceitos-teóricos.html#cb60-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_acf_diagnostics</span>(date, electrical_demand,</span>
<span id="cb60-8"><a href="conceitos-teóricos.html#cb60-8" aria-hidden="true" tabindex="-1"></a>                       <span class="at">.show_white_noise_bars =</span> T,</span>
<span id="cb60-9"><a href="conceitos-teóricos.html#cb60-9" aria-hidden="true" tabindex="-1"></a>                       <span class="at">.interactive =</span> F)</span></code></pre></div>
<pre><code>## Max lag exceeds data available. Using max lag: 187</code></pre>
<p><img src="_main_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>A figura ilustra além do ACF, a função de autocorrelação parcial (PACF, em inglês) que será melhor explicada na seção xxx.</p>
</div>
<div id="a-função-de-covariância-cruzada-e-de-correlação-cruzada" class="section level3" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> A Função de Covariância-Cruzada e de Correlação-Cruzada</h3>
<p>De maneira geral, gostariamos de medir a previsibilidade de uma outra série <span class="math inline">\(y_t\)</span> a partir da série <span class="math inline">\(x_s\)</span>. Assumindo que ambas as séries tem variância finita, nós temos a seguinte definição para a função de covariância cruzada:</p>
<p><span class="math display">\[\gamma_{x,y}(s,t) = cov(x_s, y_t) = E[(x_s - \mu_{xs})]\]</span></p>
<p>A função de correlação cruzada (FCC) é dada por:</p>
<p><span class="math display">\[\rho_{xy}(s,t) = \frac{\gamma_{xt}(s,t)}{\sqrt{\gamma_{x}(s,s) \gamma_{y}(t,t)}}\]</span></p>
<p>Podemos inclusive extender a ideia acima para o caso de mais de duas séries.</p>
<p>O pacote <code>timetk</code> oferece um banco de dados de vendas semanais na rede walmart. Além de informações de vendas semanais para diferentes departamentos de algumas lojas da Walmart. Além da série de tempo principal, temos algumas covariadas adicionais: <code>isHoliday</code>, que indica se a semana específica possui um feriado, <code>Temperature</code>, que indica a temperatura média da semana e <code>Fuel_Price</code>, que indica o preço do combustível naquela semana.</p>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="conceitos-teóricos.html#cb62-1" aria-hidden="true" tabindex="-1"></a>walmart_sales_weekly <span class="sc">%&gt;%</span> </span>
<span id="cb62-2"><a href="conceitos-teóricos.html#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb62-3"><a href="conceitos-teóricos.html#cb62-3" aria-hidden="true" tabindex="-1"></a>  knitr<span class="sc">::</span><span class="fu">kable</span>(<span class="at">caption =</span> <span class="st">&quot;Vendas semanais das lojas walmart&quot;</span>)</span></code></pre></div>
<table>
<caption><span id="tab:walmart">Table 5.1: </span>Vendas semanais das lojas walmart</caption>
<colgroup>
<col width="2%" />
<col width="3%" />
<col width="3%" />
<col width="7%" />
<col width="8%" />
<col width="6%" />
<col width="3%" />
<col width="4%" />
<col width="7%" />
<col width="7%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="5%" />
<col width="8%" />
</colgroup>
<thead>
<tr class="header">
<th align="left">id</th>
<th align="right">Store</th>
<th align="right">Dept</th>
<th align="left">Date</th>
<th align="right">Weekly_Sales</th>
<th align="left">IsHoliday</th>
<th align="left">Type</th>
<th align="right">Size</th>
<th align="right">Temperature</th>
<th align="right">Fuel_Price</th>
<th align="right">MarkDown1</th>
<th align="right">MarkDown2</th>
<th align="right">MarkDown3</th>
<th align="right">MarkDown4</th>
<th align="right">MarkDown5</th>
<th align="right">CPI</th>
<th align="right">Unemployment</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">1_1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2010-02-05</td>
<td align="right">24924.50</td>
<td align="left">FALSE</td>
<td align="left">A</td>
<td align="right">151315</td>
<td align="right">42.31</td>
<td align="right">2.572</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">211.0964</td>
<td align="right">8.106</td>
</tr>
<tr class="even">
<td align="left">1_1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2010-02-12</td>
<td align="right">46039.49</td>
<td align="left">TRUE</td>
<td align="left">A</td>
<td align="right">151315</td>
<td align="right">38.51</td>
<td align="right">2.548</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">211.2422</td>
<td align="right">8.106</td>
</tr>
<tr class="odd">
<td align="left">1_1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2010-02-19</td>
<td align="right">41595.55</td>
<td align="left">FALSE</td>
<td align="left">A</td>
<td align="right">151315</td>
<td align="right">39.93</td>
<td align="right">2.514</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">211.2891</td>
<td align="right">8.106</td>
</tr>
<tr class="even">
<td align="left">1_1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2010-02-26</td>
<td align="right">19403.54</td>
<td align="left">FALSE</td>
<td align="left">A</td>
<td align="right">151315</td>
<td align="right">46.63</td>
<td align="right">2.561</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">211.3196</td>
<td align="right">8.106</td>
</tr>
<tr class="odd">
<td align="left">1_1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2010-03-05</td>
<td align="right">21827.90</td>
<td align="left">FALSE</td>
<td align="left">A</td>
<td align="right">151315</td>
<td align="right">46.50</td>
<td align="right">2.625</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">211.3501</td>
<td align="right">8.106</td>
</tr>
<tr class="even">
<td align="left">1_1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left">2010-03-12</td>
<td align="right">21043.39</td>
<td align="left">FALSE</td>
<td align="left">A</td>
<td align="right">151315</td>
<td align="right">57.79</td>
<td align="right">2.667</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">211.3806</td>
<td align="right">8.106</td>
</tr>
</tbody>
</table>
<p>Na figura @ref(fig:walmart_11) exibimos a série de vendas no tempo apenas para o departamento 1 da loja 1.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="conceitos-teóricos.html#cb63-1" aria-hidden="true" tabindex="-1"></a>walmart_sales_weekly <span class="sc">%&gt;%</span> </span>
<span id="cb63-2"><a href="conceitos-teóricos.html#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(id <span class="sc">==</span> <span class="st">&quot;1_1&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb63-3"><a href="conceitos-teóricos.html#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_time_series</span>(Date, Weekly_Sales)</span></code></pre></div>
<div class="figure">
<div id="htmlwidget-c3d03e6947c385dabb82" style="width:672px;height:480px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-c3d03e6947c385dabb82">{"x":{"data":[{"x":["2010-02-05","2010-02-12","2010-02-19","2010-02-26","2010-03-05","2010-03-12","2010-03-19","2010-03-26","2010-04-02","2010-04-09","2010-04-16","2010-04-23","2010-04-30","2010-05-07","2010-05-14","2010-05-21","2010-05-28","2010-06-04","2010-06-11","2010-06-18","2010-06-25","2010-07-02","2010-07-09","2010-07-16","2010-07-23","2010-07-30","2010-08-06","2010-08-13","2010-08-20","2010-08-27","2010-09-03","2010-09-10","2010-09-17","2010-09-24","2010-10-01","2010-10-08","2010-10-15","2010-10-22","2010-10-29","2010-11-05","2010-11-12","2010-11-19","2010-11-26","2010-12-03","2010-12-10","2010-12-17","2010-12-24","2010-12-31","2011-01-07","2011-01-14","2011-01-21","2011-01-28","2011-02-04","2011-02-11","2011-02-18","2011-02-25","2011-03-04","2011-03-11","2011-03-18","2011-03-25","2011-04-01","2011-04-08","2011-04-15","2011-04-22","2011-04-29","2011-05-06","2011-05-13","2011-05-20","2011-05-27","2011-06-03","2011-06-10","2011-06-17","2011-06-24","2011-07-01","2011-07-08","2011-07-15","2011-07-22","2011-07-29","2011-08-05","2011-08-12","2011-08-19","2011-08-26","2011-09-02","2011-09-09","2011-09-16","2011-09-23","2011-09-30","2011-10-07","2011-10-14","2011-10-21","2011-10-28","2011-11-04","2011-11-11","2011-11-18","2011-11-25","2011-12-02","2011-12-09","2011-12-16","2011-12-23","2011-12-30","2012-01-06","2012-01-13","2012-01-20","2012-01-27","2012-02-03","2012-02-10","2012-02-17","2012-02-24","2012-03-02","2012-03-09","2012-03-16","2012-03-23","2012-03-30","2012-04-06","2012-04-13","2012-04-20","2012-04-27","2012-05-04","2012-05-11","2012-05-18","2012-05-25","2012-06-01","2012-06-08","2012-06-15","2012-06-22","2012-06-29","2012-07-06","2012-07-13","2012-07-20","2012-07-27","2012-08-03","2012-08-10","2012-08-17","2012-08-24","2012-08-31","2012-09-07","2012-09-14","2012-09-21","2012-09-28","2012-10-05","2012-10-12","2012-10-19","2012-10-26"],"y":[24924.5,46039.49,41595.55,19403.54,21827.9,21043.39,22136.64,26229.21,57258.43,42960.91,17596.96,16145.35,16555.11,17413.94,18926.74,14773.04,15580.43,17558.09,16637.62,16216.27,16328.72,16333.14,17688.76,17150.84,15360.45,15381.82,17508.41,15536.4,15740.13,15793.87,16241.78,18194.74,19354.23,18122.52,20094.19,23388.03,26978.34,25543.04,38640.93,34238.88,19549.39,19552.84,18820.29,22517.56,31497.65,44912.86,55931.23,19124.58,15984.24,17359.7,17341.47,18461.18,21665.76,37887.17,46845.87,19363.83,20327.61,21280.4,20334.23,20881.1,20398.09,23873.79,28762.37,50510.31,41512.39,20138.19,17235.15,15136.78,15741.6,16434.15,15883.52,14978.09,15682.81,15363.5,16148.87,15654.85,15766.6,15922.41,15295.55,14539.79,14689.24,14537.37,15277.27,17746.68,18535.48,17859.3,18337.68,20797.58,23077.55,23351.8,31579.9,39886.06,18689.54,19050.66,20911.25,25293.49,33305.92,45773.03,46788.75,23350.88,16567.69,16894.4,18365.1,18378.16,23510.49,36988.49,54060.1,20124.22,20113.03,21140.07,22366.88,22107.7,28952.86,57592.12,34684.21,16976.19,16347.6,17147.44,18164.2,18517.79,16963.55,16065.49,17666,17558.82,16633.41,15722.82,17823.37,16566.18,16348.06,15731.18,16628.31,16119.92,17330.7,16286.4,16680.24,18322.37,19616.22,19251.5,18947.81,21904.47,22764.01,24185.27,27390.81],"text":["Date: 2010-02-05<br />.value: 24924.50","Date: 2010-02-12<br />.value: 46039.49","Date: 2010-02-19<br />.value: 41595.55","Date: 2010-02-26<br />.value: 19403.54","Date: 2010-03-05<br />.value: 21827.90","Date: 2010-03-12<br />.value: 21043.39","Date: 2010-03-19<br />.value: 22136.64","Date: 2010-03-26<br />.value: 26229.21","Date: 2010-04-02<br />.value: 57258.43","Date: 2010-04-09<br />.value: 42960.91","Date: 2010-04-16<br />.value: 17596.96","Date: 2010-04-23<br />.value: 16145.35","Date: 2010-04-30<br />.value: 16555.11","Date: 2010-05-07<br />.value: 17413.94","Date: 2010-05-14<br />.value: 18926.74","Date: 2010-05-21<br />.value: 14773.04","Date: 2010-05-28<br />.value: 15580.43","Date: 2010-06-04<br />.value: 17558.09","Date: 2010-06-11<br />.value: 16637.62","Date: 2010-06-18<br />.value: 16216.27","Date: 2010-06-25<br />.value: 16328.72","Date: 2010-07-02<br />.value: 16333.14","Date: 2010-07-09<br />.value: 17688.76","Date: 2010-07-16<br />.value: 17150.84","Date: 2010-07-23<br />.value: 15360.45","Date: 2010-07-30<br />.value: 15381.82","Date: 2010-08-06<br />.value: 17508.41","Date: 2010-08-13<br />.value: 15536.40","Date: 2010-08-20<br />.value: 15740.13","Date: 2010-08-27<br />.value: 15793.87","Date: 2010-09-03<br />.value: 16241.78","Date: 2010-09-10<br />.value: 18194.74","Date: 2010-09-17<br />.value: 19354.23","Date: 2010-09-24<br />.value: 18122.52","Date: 2010-10-01<br />.value: 20094.19","Date: 2010-10-08<br />.value: 23388.03","Date: 2010-10-15<br />.value: 26978.34","Date: 2010-10-22<br />.value: 25543.04","Date: 2010-10-29<br />.value: 38640.93","Date: 2010-11-05<br />.value: 34238.88","Date: 2010-11-12<br />.value: 19549.39","Date: 2010-11-19<br />.value: 19552.84","Date: 2010-11-26<br />.value: 18820.29","Date: 2010-12-03<br />.value: 22517.56","Date: 2010-12-10<br />.value: 31497.65","Date: 2010-12-17<br />.value: 44912.86","Date: 2010-12-24<br />.value: 55931.23","Date: 2010-12-31<br />.value: 19124.58","Date: 2011-01-07<br />.value: 15984.24","Date: 2011-01-14<br />.value: 17359.70","Date: 2011-01-21<br />.value: 17341.47","Date: 2011-01-28<br />.value: 18461.18","Date: 2011-02-04<br />.value: 21665.76","Date: 2011-02-11<br />.value: 37887.17","Date: 2011-02-18<br />.value: 46845.87","Date: 2011-02-25<br />.value: 19363.83","Date: 2011-03-04<br />.value: 20327.61","Date: 2011-03-11<br />.value: 21280.40","Date: 2011-03-18<br />.value: 20334.23","Date: 2011-03-25<br />.value: 20881.10","Date: 2011-04-01<br />.value: 20398.09","Date: 2011-04-08<br />.value: 23873.79","Date: 2011-04-15<br />.value: 28762.37","Date: 2011-04-22<br />.value: 50510.31","Date: 2011-04-29<br />.value: 41512.39","Date: 2011-05-06<br />.value: 20138.19","Date: 2011-05-13<br />.value: 17235.15","Date: 2011-05-20<br />.value: 15136.78","Date: 2011-05-27<br />.value: 15741.60","Date: 2011-06-03<br />.value: 16434.15","Date: 2011-06-10<br />.value: 15883.52","Date: 2011-06-17<br />.value: 14978.09","Date: 2011-06-24<br />.value: 15682.81","Date: 2011-07-01<br />.value: 15363.50","Date: 2011-07-08<br />.value: 16148.87","Date: 2011-07-15<br />.value: 15654.85","Date: 2011-07-22<br />.value: 15766.60","Date: 2011-07-29<br />.value: 15922.41","Date: 2011-08-05<br />.value: 15295.55","Date: 2011-08-12<br />.value: 14539.79","Date: 2011-08-19<br />.value: 14689.24","Date: 2011-08-26<br />.value: 14537.37","Date: 2011-09-02<br />.value: 15277.27","Date: 2011-09-09<br />.value: 17746.68","Date: 2011-09-16<br />.value: 18535.48","Date: 2011-09-23<br />.value: 17859.30","Date: 2011-09-30<br />.value: 18337.68","Date: 2011-10-07<br />.value: 20797.58","Date: 2011-10-14<br />.value: 23077.55","Date: 2011-10-21<br />.value: 23351.80","Date: 2011-10-28<br />.value: 31579.90","Date: 2011-11-04<br />.value: 39886.06","Date: 2011-11-11<br />.value: 18689.54","Date: 2011-11-18<br />.value: 19050.66","Date: 2011-11-25<br />.value: 20911.25","Date: 2011-12-02<br />.value: 25293.49","Date: 2011-12-09<br />.value: 33305.92","Date: 2011-12-16<br />.value: 45773.03","Date: 2011-12-23<br />.value: 46788.75","Date: 2011-12-30<br />.value: 23350.88","Date: 2012-01-06<br />.value: 16567.69","Date: 2012-01-13<br />.value: 16894.40","Date: 2012-01-20<br />.value: 18365.10","Date: 2012-01-27<br />.value: 18378.16","Date: 2012-02-03<br />.value: 23510.49","Date: 2012-02-10<br />.value: 36988.49","Date: 2012-02-17<br />.value: 54060.10","Date: 2012-02-24<br />.value: 20124.22","Date: 2012-03-02<br />.value: 20113.03","Date: 2012-03-09<br />.value: 21140.07","Date: 2012-03-16<br />.value: 22366.88","Date: 2012-03-23<br />.value: 22107.70","Date: 2012-03-30<br />.value: 28952.86","Date: 2012-04-06<br />.value: 57592.12","Date: 2012-04-13<br />.value: 34684.21","Date: 2012-04-20<br />.value: 16976.19","Date: 2012-04-27<br />.value: 16347.60","Date: 2012-05-04<br />.value: 17147.44","Date: 2012-05-11<br />.value: 18164.20","Date: 2012-05-18<br />.value: 18517.79","Date: 2012-05-25<br />.value: 16963.55","Date: 2012-06-01<br />.value: 16065.49","Date: 2012-06-08<br />.value: 17666.00","Date: 2012-06-15<br />.value: 17558.82","Date: 2012-06-22<br />.value: 16633.41","Date: 2012-06-29<br />.value: 15722.82","Date: 2012-07-06<br />.value: 17823.37","Date: 2012-07-13<br />.value: 16566.18","Date: 2012-07-20<br />.value: 16348.06","Date: 2012-07-27<br />.value: 15731.18","Date: 2012-08-03<br />.value: 16628.31","Date: 2012-08-10<br />.value: 16119.92","Date: 2012-08-17<br />.value: 17330.70","Date: 2012-08-24<br />.value: 16286.40","Date: 2012-08-31<br />.value: 16680.24","Date: 2012-09-07<br />.value: 18322.37","Date: 2012-09-14<br />.value: 19616.22","Date: 2012-09-21<br />.value: 19251.50","Date: 2012-09-28<br />.value: 18947.81","Date: 2012-10-05<br />.value: 21904.47","Date: 2012-10-12<br />.value: 22764.01","Date: 2012-10-19<br />.value: 24185.27","Date: 2012-10-26<br />.value: 27390.81"],"type":"scatter","mode":"lines","line":{"width":1.88976377952756,"color":"rgba(44,62,80,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":["2010-02-05","2010-02-12","2010-02-19","2010-02-26","2010-03-05","2010-03-12","2010-03-19","2010-03-26","2010-04-02","2010-04-09","2010-04-16","2010-04-23","2010-04-30","2010-05-07","2010-05-14","2010-05-21","2010-05-28","2010-06-04","2010-06-11","2010-06-18","2010-06-25","2010-07-02","2010-07-09","2010-07-16","2010-07-23","2010-07-30","2010-08-06","2010-08-13","2010-08-20","2010-08-27","2010-09-03","2010-09-10","2010-09-17","2010-09-24","2010-10-01","2010-10-08","2010-10-15","2010-10-22","2010-10-29","2010-11-05","2010-11-12","2010-11-19","2010-11-26","2010-12-03","2010-12-10","2010-12-17","2010-12-24","2010-12-31","2011-01-07","2011-01-14","2011-01-21","2011-01-28","2011-02-04","2011-02-11","2011-02-18","2011-02-25","2011-03-04","2011-03-11","2011-03-18","2011-03-25","2011-04-01","2011-04-08","2011-04-15","2011-04-22","2011-04-29","2011-05-06","2011-05-13","2011-05-20","2011-05-27","2011-06-03","2011-06-10","2011-06-17","2011-06-24","2011-07-01","2011-07-08","2011-07-15","2011-07-22","2011-07-29","2011-08-05","2011-08-12","2011-08-19","2011-08-26","2011-09-02","2011-09-09","2011-09-16","2011-09-23","2011-09-30","2011-10-07","2011-10-14","2011-10-21","2011-10-28","2011-11-04","2011-11-11","2011-11-18","2011-11-25","2011-12-02","2011-12-09","2011-12-16","2011-12-23","2011-12-30","2012-01-06","2012-01-13","2012-01-20","2012-01-27","2012-02-03","2012-02-10","2012-02-17","2012-02-24","2012-03-02","2012-03-09","2012-03-16","2012-03-23","2012-03-30","2012-04-06","2012-04-13","2012-04-20","2012-04-27","2012-05-04","2012-05-11","2012-05-18","2012-05-25","2012-06-01","2012-06-08","2012-06-15","2012-06-22","2012-06-29","2012-07-06","2012-07-13","2012-07-20","2012-07-27","2012-08-03","2012-08-10","2012-08-17","2012-08-24","2012-08-31","2012-09-07","2012-09-14","2012-09-21","2012-09-28","2012-10-05","2012-10-12","2012-10-19","2012-10-26"],"y":[25543.6498642263,25391.6402516584,25242.3653615228,25096.1032236982,24953.1318680636,24813.7293244978,24678.1736228796,24546.742793088,24419.7148650018,24297.3678684998,24179.9798334609,24067.828789764,23961.192767288,23860.3497959116,23765.5779055139,23677.1551259735,23595.3594871695,23520.4690189806,23452.2134625449,23389.8609693741,23332.9971849075,23281.2077545845,23234.0783238444,23191.1945381266,23152.1420428705,23116.5064835154,23083.8735055006,23053.8287542656,23025.9578752495,22999.8465138919,22975.0803156321,22951.2449259094,22927.9259901631,22904.7091538327,22881.1800623575,22856.9243611767,22847.5392934436,22866.5878376002,22910.6042420191,22976.1227550732,23059.6776251352,23157.8031005777,23267.0334297737,23383.9028610957,23504.9456429166,23626.6960236091,23745.6882515459,23858.4565750997,23961.5352426434,24051.4585025496,24124.7606031912,24177.9757929407,24207.6383201711,24210.2824332549,24173.2006837645,24089.8476038226,23966.0004126281,23807.43632938,23619.932573277,23409.266363518,23181.2149193018,22941.5554598275,22696.0652042937,22450.5213718993,22210.7011818433,21982.3818533245,21771.3406055417,21583.3546576939,21424.2012289798,21299.6575385983,21215.5008057483,21177.5082496286,21179.0893752023,21207.7450541421,21260.3895557115,21333.9371491743,21425.3021037941,21531.3986888343,21649.1411735587,21775.4438272309,21907.2209191144,22041.3867184728,22174.8554945698,22304.541516669,22427.359054034,22540.2223759283,22640.0457516156,22723.7434503595,22788.2297414236,22830.4188940716,22862.7100348357,22898.8245455005,22937.6600782072,22978.1142850973,23019.0848183122,23059.4693299934,23098.1654722822,23134.07089732,23166.0832572483,23193.1002042085,23214.019390342,23227.7384677902,23233.1550886945,23229.1669051963,23214.6715694371,23188.5667335583,23149.7500497012,23097.1191700074,23036.9917537538,22976.0257623404,22913.6293010933,22849.2104753384,22782.1773904014,22711.9381516085,22637.9008642854,22559.4736337581,22476.0645653525,22387.0817643945,22291.9333362101,22190.0273861251,22080.7720194655,21963.5753415571,21837.845457726,21702.990473298,21558.418493599,21403.5376239549,21238.9232554098,21065.6991378578,20884.0959148999,20694.3442301373,20496.6747271709,20291.3180496019,20078.5048410313,19858.4657450601,19631.4314052894,19397.6324653203,19157.2995687538,18910.6633591909,18657.9544802328,18399.4035754806,18135.2412885351,17865.6982629976,17591.0051424691],"text":["Date: 2010-02-05<br />.value_smooth: 25543.65","Date: 2010-02-12<br />.value_smooth: 25391.64","Date: 2010-02-19<br />.value_smooth: 25242.37","Date: 2010-02-26<br />.value_smooth: 25096.10","Date: 2010-03-05<br />.value_smooth: 24953.13","Date: 2010-03-12<br />.value_smooth: 24813.73","Date: 2010-03-19<br />.value_smooth: 24678.17","Date: 2010-03-26<br />.value_smooth: 24546.74","Date: 2010-04-02<br />.value_smooth: 24419.71","Date: 2010-04-09<br />.value_smooth: 24297.37","Date: 2010-04-16<br />.value_smooth: 24179.98","Date: 2010-04-23<br />.value_smooth: 24067.83","Date: 2010-04-30<br />.value_smooth: 23961.19","Date: 2010-05-07<br />.value_smooth: 23860.35","Date: 2010-05-14<br />.value_smooth: 23765.58","Date: 2010-05-21<br />.value_smooth: 23677.16","Date: 2010-05-28<br />.value_smooth: 23595.36","Date: 2010-06-04<br />.value_smooth: 23520.47","Date: 2010-06-11<br />.value_smooth: 23452.21","Date: 2010-06-18<br />.value_smooth: 23389.86","Date: 2010-06-25<br />.value_smooth: 23333.00","Date: 2010-07-02<br />.value_smooth: 23281.21","Date: 2010-07-09<br />.value_smooth: 23234.08","Date: 2010-07-16<br />.value_smooth: 23191.19","Date: 2010-07-23<br />.value_smooth: 23152.14","Date: 2010-07-30<br />.value_smooth: 23116.51","Date: 2010-08-06<br />.value_smooth: 23083.87","Date: 2010-08-13<br />.value_smooth: 23053.83","Date: 2010-08-20<br />.value_smooth: 23025.96","Date: 2010-08-27<br />.value_smooth: 22999.85","Date: 2010-09-03<br />.value_smooth: 22975.08","Date: 2010-09-10<br />.value_smooth: 22951.24","Date: 2010-09-17<br />.value_smooth: 22927.93","Date: 2010-09-24<br />.value_smooth: 22904.71","Date: 2010-10-01<br />.value_smooth: 22881.18","Date: 2010-10-08<br />.value_smooth: 22856.92","Date: 2010-10-15<br />.value_smooth: 22847.54","Date: 2010-10-22<br />.value_smooth: 22866.59","Date: 2010-10-29<br />.value_smooth: 22910.60","Date: 2010-11-05<br />.value_smooth: 22976.12","Date: 2010-11-12<br />.value_smooth: 23059.68","Date: 2010-11-19<br />.value_smooth: 23157.80","Date: 2010-11-26<br />.value_smooth: 23267.03","Date: 2010-12-03<br />.value_smooth: 23383.90","Date: 2010-12-10<br />.value_smooth: 23504.95","Date: 2010-12-17<br />.value_smooth: 23626.70","Date: 2010-12-24<br />.value_smooth: 23745.69","Date: 2010-12-31<br />.value_smooth: 23858.46","Date: 2011-01-07<br />.value_smooth: 23961.54","Date: 2011-01-14<br />.value_smooth: 24051.46","Date: 2011-01-21<br />.value_smooth: 24124.76","Date: 2011-01-28<br />.value_smooth: 24177.98","Date: 2011-02-04<br />.value_smooth: 24207.64","Date: 2011-02-11<br />.value_smooth: 24210.28","Date: 2011-02-18<br />.value_smooth: 24173.20","Date: 2011-02-25<br />.value_smooth: 24089.85","Date: 2011-03-04<br />.value_smooth: 23966.00","Date: 2011-03-11<br />.value_smooth: 23807.44","Date: 2011-03-18<br />.value_smooth: 23619.93","Date: 2011-03-25<br />.value_smooth: 23409.27","Date: 2011-04-01<br />.value_smooth: 23181.21","Date: 2011-04-08<br />.value_smooth: 22941.56","Date: 2011-04-15<br />.value_smooth: 22696.07","Date: 2011-04-22<br />.value_smooth: 22450.52","Date: 2011-04-29<br />.value_smooth: 22210.70","Date: 2011-05-06<br />.value_smooth: 21982.38","Date: 2011-05-13<br />.value_smooth: 21771.34","Date: 2011-05-20<br />.value_smooth: 21583.35","Date: 2011-05-27<br />.value_smooth: 21424.20","Date: 2011-06-03<br />.value_smooth: 21299.66","Date: 2011-06-10<br />.value_smooth: 21215.50","Date: 2011-06-17<br />.value_smooth: 21177.51","Date: 2011-06-24<br />.value_smooth: 21179.09","Date: 2011-07-01<br />.value_smooth: 21207.75","Date: 2011-07-08<br />.value_smooth: 21260.39","Date: 2011-07-15<br />.value_smooth: 21333.94","Date: 2011-07-22<br />.value_smooth: 21425.30","Date: 2011-07-29<br />.value_smooth: 21531.40","Date: 2011-08-05<br />.value_smooth: 21649.14","Date: 2011-08-12<br />.value_smooth: 21775.44","Date: 2011-08-19<br />.value_smooth: 21907.22","Date: 2011-08-26<br />.value_smooth: 22041.39","Date: 2011-09-02<br />.value_smooth: 22174.86","Date: 2011-09-09<br />.value_smooth: 22304.54","Date: 2011-09-16<br />.value_smooth: 22427.36","Date: 2011-09-23<br />.value_smooth: 22540.22","Date: 2011-09-30<br />.value_smooth: 22640.05","Date: 2011-10-07<br />.value_smooth: 22723.74","Date: 2011-10-14<br />.value_smooth: 22788.23","Date: 2011-10-21<br />.value_smooth: 22830.42","Date: 2011-10-28<br />.value_smooth: 22862.71","Date: 2011-11-04<br />.value_smooth: 22898.82","Date: 2011-11-11<br />.value_smooth: 22937.66","Date: 2011-11-18<br />.value_smooth: 22978.11","Date: 2011-11-25<br />.value_smooth: 23019.08","Date: 2011-12-02<br />.value_smooth: 23059.47","Date: 2011-12-09<br />.value_smooth: 23098.17","Date: 2011-12-16<br />.value_smooth: 23134.07","Date: 2011-12-23<br />.value_smooth: 23166.08","Date: 2011-12-30<br />.value_smooth: 23193.10","Date: 2012-01-06<br />.value_smooth: 23214.02","Date: 2012-01-13<br />.value_smooth: 23227.74","Date: 2012-01-20<br />.value_smooth: 23233.16","Date: 2012-01-27<br />.value_smooth: 23229.17","Date: 2012-02-03<br />.value_smooth: 23214.67","Date: 2012-02-10<br />.value_smooth: 23188.57","Date: 2012-02-17<br />.value_smooth: 23149.75","Date: 2012-02-24<br />.value_smooth: 23097.12","Date: 2012-03-02<br />.value_smooth: 23036.99","Date: 2012-03-09<br />.value_smooth: 22976.03","Date: 2012-03-16<br />.value_smooth: 22913.63","Date: 2012-03-23<br />.value_smooth: 22849.21","Date: 2012-03-30<br />.value_smooth: 22782.18","Date: 2012-04-06<br />.value_smooth: 22711.94","Date: 2012-04-13<br />.value_smooth: 22637.90","Date: 2012-04-20<br />.value_smooth: 22559.47","Date: 2012-04-27<br />.value_smooth: 22476.06","Date: 2012-05-04<br />.value_smooth: 22387.08","Date: 2012-05-11<br />.value_smooth: 22291.93","Date: 2012-05-18<br />.value_smooth: 22190.03","Date: 2012-05-25<br />.value_smooth: 22080.77","Date: 2012-06-01<br />.value_smooth: 21963.58","Date: 2012-06-08<br />.value_smooth: 21837.85","Date: 2012-06-15<br />.value_smooth: 21702.99","Date: 2012-06-22<br />.value_smooth: 21558.42","Date: 2012-06-29<br />.value_smooth: 21403.54","Date: 2012-07-06<br />.value_smooth: 21238.92","Date: 2012-07-13<br />.value_smooth: 21065.70","Date: 2012-07-20<br />.value_smooth: 20884.10","Date: 2012-07-27<br />.value_smooth: 20694.34","Date: 2012-08-03<br />.value_smooth: 20496.67","Date: 2012-08-10<br />.value_smooth: 20291.32","Date: 2012-08-17<br />.value_smooth: 20078.50","Date: 2012-08-24<br />.value_smooth: 19858.47","Date: 2012-08-31<br />.value_smooth: 19631.43","Date: 2012-09-07<br />.value_smooth: 19397.63","Date: 2012-09-14<br />.value_smooth: 19157.30","Date: 2012-09-21<br />.value_smooth: 18910.66","Date: 2012-09-28<br />.value_smooth: 18657.95","Date: 2012-10-05<br />.value_smooth: 18399.40","Date: 2012-10-12<br />.value_smooth: 18135.24","Date: 2012-10-19<br />.value_smooth: 17865.70","Date: 2012-10-26<br />.value_smooth: 17591.01"],"type":"scatter","mode":"lines","line":{"width":3.77952755905512,"color":"rgba(51,102,255,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.7625570776256,"r":7.30593607305936,"b":25.5707762557078,"l":40.1826484018265},"plot_bgcolor":"rgba(255,255,255,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(44,62,80,1)","family":"","size":14.6118721461187},"title":{"text":"Time Series Plot","font":{"color":"rgba(44,62,80,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"date","autorange":true,"range":["2009-12-17","2012-12-14"],"tickmode":"auto","ticktext":["2010","2011","2012"],"tickvals":[14610,14975,15340],"categoryorder":"array","categoryarray":["2010","2011","2012"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"y","title":{"text":"","font":{"color":"rgba(44,62,80,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":true,"range":[12384.6325,59744.8575],"tickmode":"auto","ticktext":["20000","30000","40000","50000"],"tickvals":[20000,30000,40000,50000],"categoryorder":"array","categoryarray":["20000","30000","40000","50000"],"nticks":null,"ticks":"outside","tickcolor":"rgba(204,204,204,1)","ticklen":3.65296803652968,"tickwidth":0.22139200221392,"showticklabels":true,"tickfont":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(204,204,204,1)","gridwidth":0.22139200221392,"zeroline":false,"anchor":"x","title":{"text":"","font":{"color":"rgba(44,62,80,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":"transparent","line":{"color":"rgba(44,62,80,1)","width":0.33208800332088,"linetype":"solid"},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.88976377952756,"font":{"color":"rgba(44,62,80,1)","family":"","size":11.689497716895}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","showSendToCloud":false},"source":"A","attrs":{"1d6468604523":{"x":{},"y":{},"type":"scatter"},"1d64201c29ef":{"x":{},"y":{}}},"cur_data":"1d6468604523","visdat":{"1d6468604523":["function (y) ","x"],"1d64201c29ef":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p class="caption">
(#fig:walmart_11)Vendas semanais do Departamento 1 da Loja na Walmart
</p>
</div>
<p>Como temos acesso as covariadas <code>Temperature</code> e <code>Fuel_Price</code> podemos calcular não apenas o ACF, mas também a Função de Correlação-Cruzada com essas duas variáveis. Para tanto, vamos utilizar o parâmetro <code>.ccf_vars</code> na função <code>plot_acf_diagnostics</code> para incluir estas duas variáveis na análise.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="conceitos-teóricos.html#cb64-1" aria-hidden="true" tabindex="-1"></a>walmart_sales_weekly <span class="sc">%&gt;%</span> </span>
<span id="cb64-2"><a href="conceitos-teóricos.html#cb64-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id) <span class="sc">%&gt;%</span> </span>
<span id="cb64-3"><a href="conceitos-teóricos.html#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(id, Date, Weekly_Sales, Temperature, Fuel_Price) <span class="sc">%&gt;%</span> </span>
<span id="cb64-4"><a href="conceitos-teóricos.html#cb64-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_acf_diagnostics</span>(Date, Weekly_Sales, <span class="co"># Calcular ACF &amp; PACF</span></span>
<span id="cb64-5"><a href="conceitos-teóricos.html#cb64-5" aria-hidden="true" tabindex="-1"></a>                       <span class="at">.ccf_vars =</span> <span class="fu">c</span>(Temperature, Fuel_Price), <span class="co"># CCF</span></span>
<span id="cb64-6"><a href="conceitos-teóricos.html#cb64-6" aria-hidden="true" tabindex="-1"></a>                       <span class="at">.lags =</span> <span class="st">&quot;3 months&quot;</span>,</span>
<span id="cb64-7"><a href="conceitos-teóricos.html#cb64-7" aria-hidden="true" tabindex="-1"></a>                       <span class="at">.interactive =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<div class="figure"><span style="display:block;" id="fig:ccf-walmart"></span>
<img src="_main_files/figure-html/ccf-walmart-1.png" alt="Correlação Cruzada de Vendas Semanais com Temperatura e Preço de Combustível" width="672" />
<p class="caption">
Figure 5.7: Correlação Cruzada de Vendas Semanais com Temperatura e Preço de Combustível
</p>
</div>
<p>A função exibe o ACF e PACF de cada um dos departamentos de cada loja Walmart, além de calcular a correlação cruzada com temperatura e preço de combustíveis. Almas relações curiosas emergem, como a relação entre os valores de vendas semanais e valores passados de temperatura. É possível que essa relação esteja sendo intermediada pelo padrão sazonal de vendas mais fortes no fim do ano.</p>
<p>É importante destacar que o padrão da correlação cruzada é afetado pela estrutura das duas séries e a tendência que cada uma tem. É preferível sempre remover a tendência das séries ou levar em consideração a estrutura do ARIMA univariado da variável <span class="math inline">\(x\)</span> antes de aplicar um gráfico de CCF. Esses tópicos serão melhor discutidos na seção xxx e yyy.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="modelos-estatísticos.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="considerações-práticas.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/04-conceitos.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
